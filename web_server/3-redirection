#!/usr/bin/env bash
# This script installs Nginx and configures a 301 redirection on Ubuntu

# Update the package list and install Nginx
sudo apt-get update -y
sudo apt-get install nginx -y

# Create a backup of the default Nginx configuration file
sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak

# Use `sed` to add a redirect to the configuration
sudo sed -i '/^\s*server\s*{/,/^\s*}/ s|^\s*location / {|    location /redirect_me {\n        return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;\n    }|' /etc/nginx/sites-available/default

# Reload Nginx to apply the changes
sudo systemctl reload nginx

# Confirm the status of the Nginx service
sudo systemctl status nginx
